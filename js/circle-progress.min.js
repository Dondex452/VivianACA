/*!
 * jquery-circle-progress - jQuery Plugin to draw animated circular progress bars
 *
 * @author   Rostyslav Bryzgunov <kottenator@gmail.com>
 * @version  1.2.2
 * @url      https://github.com/kottenator/jquery-circle-progress
 * @license  MIT
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(window)),t.fn.circleProgress&&(t.fn.circleProgress.noConflict=function(){t.fn.circleProgress=o}),n(t),t.fn.circleProgress=t},t(jQuery||require("jquery")):t(jQuery)}(function(t){function n(t){function n(t){this.init(t)}t.fn.circleProgress=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t,o=t instanceof Object&&void 0===t.value?t.value:void 0,a=t instanceof Object?void 0!==t.size?t.size:void 0!==t.radius?2*t.radius:void 0:void 0,e=t instanceof Object?void 0!==t.startAngle?t.startAngle:void 0!==t.startAngleInPercent?.5*t.startAngleInPercent*Math.PI:void 0:void 0,s=t instanceof Object?void 0!==t.thickness?t.thickness:void 0!==t.strokeWidth?t.strokeWidth:void 0:void 0,h=t instanceof Object?void 0!==t.fill?t.fill:void 0!==t.color?t.color:void 0:void 0,l=t instanceof Object?void 0!==t.animation?t.animation:void 0!==t.animationDuration?{duration:t.animationDuration}:void 0:void 0,u=t instanceof Object?void 0!==t.reverse?t.reverse:void 0!==t.clockwise?!t.clockwise:void 0:void 0,c=t instanceof Object?void 0!==t.lineCap?t.lineCap:void 0!==t.roundedLineCap?t.lineCap="round":void 0:void 0,d=t instanceof Object?void 0!==t.insertMode?t.insertMode:void 0:void 0,f=t instanceof Object?void 0!==t.arcCoef?t.arcCoef:void 0:void 0,g=t instanceof Object?void 0!==t.text?t.text:void 0:void 0,v=t instanceof Object?void 0!==t.textFormat?t.textFormat:void 0:void 0;if(void 0!==r){var p=t.$canvas?t.$canvas:t.$this?t.$this:t.$(this),m=p.data("circle-progress");if(m)switch(r){case"value":m.val(o);break;case"size":m.size(a);break;case"startAngle":m.startAngle(e);break;case"thickness":m.thickness(s);break;case"fill":m.fill(h);break;case"animation":m.animation(l);break;case"reverse":m.reverse(u);break;case"lineCap":m.lineCap(c);break;case"insertMode":m.insertMode(d);break;case"arcCoef":m.arcCoef(f);break;case"text":m.text(g);break;case"textFormat":m.textFormat(v);break;default:for(var x in r)r.hasOwnProperty(x)&&m.attr(x,r[x])}else r=new n(t),$canvas=r.draw(),p.data("circle-progress",$canvas),p=$canvas}else r=new n(t),$canvas=r.draw(),t.$this=t.$(this).append($canvas),$canvas.data("circle-progress",r)}})},n.prototype={----------------------------------------value:0,size:100,startAngle:0,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",insertMode:"prepend",arcCoef:.55,text:{},textFormat:"horizontal",textTemplate:null,constructor:n,noConflict:function(){return t.fn.circleProgress=o,this},init:function(n){t.extend(this,n),this.$this=this.$(n.canvas||document.body),this.attrOrThrow("value","number"),this.attrOrThrow("size","number"),this.attrOrThrow("startAngle","number"),this.attrOrThrow("thickness","number"),this.attrOrThrow("fill","object"),this.attrOrThrow("emptyFill","string"),this.attrOrThrow("animation","object"),this.attrOrThrow("animationStartValue","number"),this.attrOrThrow("reverse","boolean"),this.attrOrThrow("lineCap","string"),this.attrOrThrow("insertMode","string"),this.attrOrThrow("arcCoef","number"),this.attrOrThrow("text","object"),this.attrOrThrow("textFormat","string"),this.value=this.clamp(this.value,0,1),this.thickness="auto"===this.thickness?this.size/14:this.thickness,this.startAngle-=Math.PI/2,this.radius=this.size/2,this.outerRadius=this.radius,this.innerRadius=this.radius-this.thickness,this.diameter=this.outerRadius*2,this.maxValue=this.value,this.textTemplate=this.makeTextTemplate()},clamp:function(t,n,i){return Math.max(n,Math.min(t,i))},attrOrThrow:function(t,n){var i=typeof this[t];if(i!==n)throw new Error("Invalid `"+t+"` type. Expected: "+n+", got: "+i+".")},makeTextTemplate:function(){var t=this.textTemplate;if(t)return t;var n=this.text.format;if(n)return"function"==typeof n?n:"string"==typeof n?function(t){return n.replace(/\{value\}/g,t.value).replace(/\{maxValue\}/g,t.maxValue)}:void 0;if(this.text.value)return function(t){return t.text.value};var i=this.textFormat;return"none"===i?function(){return""}:"vertical"===i?function(t){return t.value.toFixed(2).split("").join("\n")}:function(t){return(t.value*100).toFixed(2)+"%"}}},draw:function(){var t=this.$canvas||this.makeCanvas();return this.update(t),t},makeCanvas:function(){var t=document.createElement("canvas");return t.width=this.size,t.height=this.size,this.$canvas=t.$(t)},update:function(t){var n=t.getContext("2d");n.clearRect(0,0,this.size,this.size),this.drawEmptyArc(n),this.drawArc(n),this.drawText(n)},drawEmptyArc:function(t){var n=this.startAngle,i=this.startAngle+2*Math.PI*this.arcCoef,r=this.outerRadius,o=this.innerRadius;if(this.emptyFill){t.beginPath(),t.arc(this.size/2,this.size/2,r,n,i,!1),t.arc(this.size/2,this.size/2,o,i,n,!0),t.closePath(),t.fillStyle=this.emptyFill,t.fill()}},drawArc:function(t){var n=this.startAngle+2*Math.PI*this.arcCoef*this.value;if(this.fill.gradient){var i=this.fill.gradient,r=this.fill.gradientDirection||"vertical",o=t.createLinearGradient("vertical"===r?0:this.size/2,"vertical"===r?this.size/2:0,"vertical"===r?0:this.size/2,"vertical"===r?this.size/2:0);t.beginPath(),t.arc(this.size/2,this.size/2,this.outerRadius,this.startAngle,n,!1),t.arc(this.size/2,this.size/2,this.innerRadius,n,this.startAngle,!0),t.closePath();for(var a=0;a<i.length;a++)o.addColorStop(a/(i.length-1),i[a]);t.fillStyle=o,t.fill()}else this.fill.image?(t.beginPath(),t.arc(this.size/2,this.size/2,this.outerRadius,this.startAngle,n,!1),t.arc(this.size/2,this.size/2,this.innerRadius,n,this.startAngle,!0),t.closePath(),t.save(),t.clip();var s=new Image;s.src=this.fill.image,s.onload=function(){t.drawImage(s,0,0,this.size,this.size)},t.restore()):this.fill.color?(t.beginPath(),t.arc(this.size/2,this.size/2,this.outerRadius,this.startAngle,n,!1),t.arc(this.size/2,this.size/2,this.innerRadius,n,this.startAngle,!0),t.closePath(),t.fillStyle=this.fill.color,t.fill()):(t.beginPath(),t.arc(this.size/2,this.size/2,this.outerRadius,this.startAngle,n,!1),t.arc(this.size/2,this.size/2,this.innerRadius,n,this.startAngle,!0),t.closePath(),t.fillStyle=this.fill,t.fill())},drawText:function(t){var n=this.textTemplate({value:this.value,maxValue:this.maxValue,text:this.text});if(n){t.font=this.text.font||"bold 16px Arial",t.fillStyle=this.text.color||"#000",t.textAlign="center",t.textBaseline="middle";var i=this.size/2,r=this.size/2,o=this.text.y||0;n=n.split("\n");for(var a=0;a<n.length;a++){var s=r+o+(a-(n.length-1)/2)*parseInt(t.font)*1.2;t.fillText(n[a],i,s)}}},val:function(t){return void 0===t?this.value:(this.value=this.clamp(t,0,1),this.$canvas&&this.update(this.$canvas),this)},size:function(t){return void 0===t?this.size:(this.size=t,this.radius=this.size/2,this.outerRadius=this.radius,this.innerRadius=this.radius-this.thickness,this.diameter=this.outerRadius*2,this.$canvas&&(this.$canvas.width=this.size,this.$canvas.height=this.size,this.update(this.$canvas)),this)},startAngle:function(t){return void 0===t?this.startAngle:(this.startAngle=t-Math.PI/2,this.$canvas&&this.update(this.$canvas),this)},thickness:function(t){return void 0===t?this.thickness:(this.thickness=t,this.innerRadius=this.radius-this.thickness,this.$canvas&&this.update(this.$canvas),this)},fill:function(t){return void 0===t?this.fill:(this.fill=t,this.$canvas&&this.update(this.$canvas),this)},animation:function(t){return void 0===t?this.animation:(this.animation=t,this.$canvas&&this.update(this.$canvas),this)},reverse:function(t){return void 0===t?this.reverse:(this.reverse=t,this.$canvas&&this.update(this.$canvas),this)},lineCap:function(t){return void 0===t?this.lineCap:(this.lineCap=t,this.$canvas&&this.update(this.$canvas),this)},insertMode:function(t){return void 0===t?this.insertMode:(this.insertMode=t,this.$canvas&&this.update(this.$canvas),this)},arcCoef:function(t){return void 0===t?this.arcCoef:(this.arcCoef=t,this.$canvas&&this.update(this.$canvas),this)},text:function(t){return void 0===t?this.text:(this.text=t,this.textTemplate=this.makeTextTemplate(),this.$canvas&&this.update(this.$canvas),this)},textFormat:function(t){return void 0===t?this.textFormat:(this.textFormat=t,this.textTemplate=this.makeTextTemplate(),this.$canvas&&this.update(this.$canvas),this)},attr:function(t,n){return void 0===n?this[t]:(this[t]=n,this.$canvas&&this.update(this.$canvas),this)}},t.easing.circleProgressEasing=function(t){return t<.5?Math.pow(t,2)*2:(2-t)*Math.pow(t,2)*2-1}});